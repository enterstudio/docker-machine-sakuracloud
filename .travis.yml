sudo: required
services: docker
language: go
go:
- 1.9
env:
  global:
  - DOCKER_MACHINE_VERSION=0.13.0
  - PATH=/home/travis/gopath/bin:$PATH DEBIAN_FRONTEND=noninteractive
  - secure: s49tL5KdMdfU+x6lGIirj1NZePF+xHAx3QgksuhZsAcXC8MlKgQSrwRquIhKwSFManv2lhbgeQnScpfXBVeLMXR/NpGBbVc0mTakMlqjZAxNJCyywH+I2ut0dtj1ohf8NAV+MJ9SSQvi6AZquwMia8g/U6nHnh7aCxdK7n9koKrN2bvGjKZYy+cBisAmMgAXBfrlcqwqHMq3of+Vw6202ldUeYrbtz4a/liJAbywrjOR+7frmUKoR2jXX3cz+MzRTE9ahWbSu3o7CyCvek4Cv7GjiG5humo3cuALuuYeH4Qlz2dR51nVXzR3GRgOwW7WVtZV3rkt/IBIG1M/oB1RDJgse895nJaBdgxbB9gIXHR/CfnQpi+pU/uHIrIoT2jpL33tX6JoAjlCavtDj8G68LHPs/xCiFoWvU3q7LGbvG+H9as60TD2umZNIZnQfNMh5QKywv+y8GBLyUb669+qcOcU4ZVrtZNUfYgFBeBsLQoxzXi9+KCk1Knt0tXz1xosj5VyCWwYbTv36iD/wlhW9GYU/cOwUgFcBDKOZc0qjvE5KtZAW+k/Z8kdnpn6kWHcwBHKgBWWSX3F9H4TUtOG3qcvHAqSg6Wq4VwHIlss5L0sOH3T6XTu8lwRXqAuQoC9bnXjlUERx8iTs3mLsmADOhNVqFfkdZvDV3CIhMV3MQs=
install:
- go get -u github.com/golang/lint/golint
script:
- make test
- make docker-build
before_deploy:
- go get github.com/aktau/github-release
- mkdir -p ~/bin
- git clone https://github.com/github/hub.git && cd hub && script/build -o ~/bin/hub
  && cd ..
- echo $TRAVIS_BRANCH
- git config --add remote.origin.fetch '+refs/heads/*:refs/remotes/origin/*'
- git fetch
- git checkout master || git checkout -b master origin/master
- git checkout $TRAVIS_BRANCH
- git fetch --depth=1000
- git fetch --tags --depth=1000 || true
deploy:
- provider: script
  script: scripts/release.pl --task=upload-to-github-release && scripts/release.pl
    --task=upload-master-to-github-release && scripts/release_homebrew.sh && scripts/release_docker_image.sh
    && scripts/release_website.sh
  skip_cleanup: true
  on:
    branch: master
- provider: script
  script: scripts/release.pl --task=create-pullrequest --current-branch=$TRAVIS_BRANCH
  skip_cleanup: true
  on:
    all_branches: true
    condition: "$TRAVIS_BRANCH =~ ^bump-version-.*$"
notifications:
  slack:
    secure: g76DMYuidTn2K92B1n2K1aJFXST79ZZRG2dQ+X8qnogFA7/FVvKAlhqixGRbDYQ8KSZE40QO9D7Ek/izmsatKW09lgUh4hc/EBV1ni5a3irt49Uj9colXZkDykfXbGD3Cd8tGVWyIplHQSVAFh9JxpCcthjKoTs6l6tsfxZPnp01yh+v1EWbZqRMc5zIz1EqZZawpYFYlm8IGSJPCw4ZlQg8ioGvxdAC+BykSZXfkdhqAFdW/uaB2uAB0uSExIyTlnurE5bS5LCUN8EdkOD8u9aXJv+knrXQQyiP5p/9PXjfYwukIE+UWWaY4n9E+dpN0ltxHJM6NSFE+87Q3bmBaQTla57XukMiQ17RNRZY/J8H/sQ7JewOGgkHfv6biVrtHNIIMjcFtgu8shwjIrrdxD7ub+BJMGlpjNvjEvj+OAoWCggNmFf0VnQ1QTvfwOs0F+c5C3/FajlC6jiaLhYD3pqA6WFKRs8CEf+kFL4RJ9WLnqNpe3bW/tQz493ZeSQjKrtbhiAxy7Y/Taq2C0Xio691rariPd5Ess1PJ0WBxHlZ6V1nWJYL7Isc0HDP+RXNRCwfN3xQ8rfGwN8F5pD8JAPAfp1PDyy1V1B+5t2hARTEDlk8mz7KtGkfIUX119W5XnE9Fs+FsBKd4JjwmpOryNifsQbuDv9qDwNic9G8eCo=
